<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare Record System</title>
    <link rel="stylesheet" href="style.css">
    <!-- The Firebase SDK will be imported by app.js -->
</head>
<body>
    <div class="container">
        <!-- Login Page -->
        <div id="login-page" class="page active">
            <div class="form-container">
                <h2>Login ü©∫</h2>
                <form id="login-form">
                    <input type="email" id="login-email" placeholder="Email" required>
                    <input type="password" id="login-password" placeholder="Password" required>
                    <button type="submit">Login</button>
                </form>
                <p>Don't have an account? <a href="#" id="show-register">Register here</a></p>
            </div>
        </div>

        <!-- Registration Page -->
        <div id="register-page" class="page">
            <div class="form-container">
                <h2>Register User üìù</h2>
                <form id="register-form">
                    <input type="text" id="register-name" placeholder="Full Name" required>
                    <input type="email" id="register-email" placeholder="Email" required>
                    <input type="password" id="register-password" placeholder="Password" required>
                    <select id="register-role" required>
                        <option value="" disabled selected>Select Role</option>
                        <option value="Patient">Patient</option>
                        <option value="Doctor">Doctor</option>
                        <option value="Administrator">Administrator</option>
                    </select>
                    <button type="submit">Register</button>
                </form>
                <p>Already have an account? <a href="#" id="show-login">Login here</a></p>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page">
            <header>
                <h2>Blockchain Healthcare Dashboard</h2>
                <div>
                    <span id="user-info"></span>
                    <button id="logout-button">Logout</button>
                </div>
            </header>
            <main class="dashboard-main">
                <!-- Doctor Features -->
                <div id="doctor-features" class="feature-section">
                    <h3>Add/Update Patient Record</h3>
                    <form id="record-form">
                        <input type="text" id="hospital-id" placeholder="Hospital ID/Name" required>
                        <input type="text" id="doctor-id" placeholder="Doctor ID/Name" required>
                        <input type="text" id="patient-id" placeholder="Patient ID/Name" required>
                        <input type="text" id="insurance-id" placeholder="Insurance ID/Name" required>
                        <input type="text" id="record-id" placeholder="Record ID" required>
                        <select id="record-type" required>
                            <option value="Diagnosis">Diagnosis</option>
                            <option value="Prescription">Prescription</option>
                            <option value="Test Result">Test Result</option>
                        </select>
                        <select id="operation-type" required>
                            <option value="Add">Add Record</option>
                            <option value="Update">Update Record</option>
                        </select>
                        <textarea id="prescription-details" placeholder="Diagnosis/Prescription Details..."></textarea>
                        <input type="number" id="amount" placeholder="Amount" required>
                        <button type="submit">Submit to Blockchain</button>
                    </form>
                </div>

                <!-- Patient & Admin History Feature -->
                <div id="view-history-feature" class="feature-section">
                    <h3>View Record History</h3>
                    <form id="view-history-form">
                        <input type="text" id="history-record-id" placeholder="Enter Record ID" required>
                        <button type="submit">Fetch History</button>
                    </form>
                    <div id="history-output" class="output-box"></div>
                </div>

                <!-- Admin-only Log Feature -->
                <div id="admin-features" class="feature-section">
                    <h3>Access Logs</h3>
                    <button id="fetch-logs-button">Fetch All Access Logs</button>
                    <div id="logs-output" class="output-box"></div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- IMPORTANT: 'type="module"' is required for Firebase v9 imports -->
    <script type="module" src="app.js"></script>
</body>
</html>

